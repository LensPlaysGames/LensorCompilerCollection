<!doctypehtml><html lang=en-us><head><meta charset=utf-8><meta content="text/html; charset=utf-8"http-equiv=Content-Type><title>LCC Playground</title><style>:root{--bg-color:rgb(14, 16, 17);--text-color:#ffffff;color-scheme:light dark}body{background:var(--bg-color);color:var(--text-color)}.lcc-svg{margin:auto;padding:8px 16px;background-color:#779095;border-radius:16px;max-height:min(10vh,10vw)}.emscripten{padding-right:0;margin-left:auto;margin-right:auto;display:block}textarea.emscripten{font-family:monospace;width:80%}div.emscripten{text-align:center}div.emscripten_border{border:1px solid #000}.spinner{height:50px;width:50px;margin:0 auto;-webkit-animation:rotation .8s linear infinite;-moz-animation:rotation .8s linear infinite;-o-animation:rotation .8s linear infinite;animation:rotation .8s linear infinite;border-left:10px solid #0096f0;border-right:10px solid #0096f0;border-bottom:10px solid #0096f0;border-top:10px solid #6400c8;border-radius:100%;background-color:#c864fa}@-webkit-keyframes rotation{from{-webkit-transform:rotate(0)}to{-webkit-transform:rotate(360deg)}}@-moz-keyframes rotation{from{-moz-transform:rotate(0)}to{-moz-transform:rotate(360deg)}}@-o-keyframes rotation{from{-o-transform:rotate(0)}to{-o-transform:rotate(360deg)}}@keyframes rotation{from{transform:rotate(0)}to{transform:rotate(360deg)}}</style></head><body><header><img class=lcc-svg src=lcc.svg></header><main><hr><figure id=spinner style=overflow:visible><div class=spinner></div><center style=margin-top:.5em><strong>Lensor Compiler Collection</strong></center></figure><div class=emscripten id=status>Downloading...</div><div class=emscripten><progress hidden id=progress max=100 value=0></progress></div><div display=flex style=flex-direction:column><div><button id=build>Build</button> <label for=build-on-change><input id=build-on-change name=build-on-change-checkbox type=checkbox value=build-on-change checked> Build On Change</label> <label for=print-ast><input id=print-ast name=print-ast-checkbox type=checkbox value=print-ast> Print AST</label> <label for=print-ir><input id=print-ir name=print-ir-checkbox type=checkbox value=print-ir> Print IR</label> <label for=print-mir><input id=print-mir name=print-mir-checkbox type=checkbox value=print-mir> Print MIR</label> <label>Format <select aria-label=Format autocomplete=nothanks id=format name=format required><option value=""selected>None</option><option value=GNUASM>GNU x86_64 Assembly</option><option value=WAT>Textual WebAssembly (WAT)</option><option value=LLVM>LLVM IR</option><option value=LCCIR>LCC IR</option><option value=LCCSSA>LCC IR (SSA Form)</option></select></label> <label>Optimisation <select aria-label=Optimisation autocomplete=nothanks id=optimisation name=optimisation required><option value=0 selected>None</option><option value=1>Minimal</option><option value=2>Some</option><option value=3>Most</option></select></label></div><div display=flex><div><h3>foo.g</h3><textarea class=emscripten id=input rows=8>69;</textarea></div><div><code id=command-line>lcc foo.g</code> <textarea class=emscripten id=output rows=16 readonly></textarea></div></div></div><hr></main><script>var Module={},statusElement=document.getElementById("status"),progressElement=document.getElementById("progress"),spinnerElement=document.getElementById("spinner"),outputElement=document.getElementById("output");outputElement&&(outputElement.value="");var inputElement=document.getElementById("input"),commandLineElement=document.getElementById("command-line"),shouldPrintAST=!1,shouldPrintIR=!1,shouldPrintMIR=!1,shouldUseFormat=void 0,shouldOptimise=void 0</script><script type=module>import LCC from"./lcc.js";function webPrint(...e){if(outputElement){var t=e.join(" ");outputElement.value+=t+"\n",outputElement.scrollTop=outputElement.scrollHeight}else console.log(...e)}var Module={onRuntimeInitialized:()=>{},setStatus:e=>{if(Module.setStatus.last||(Module.setStatus.last={time:Date.now(),text:""}),e!==Module.setStatus.last.text){var t=e.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/),n=Date.now();t&&n-Module.setStatus.last.time<30||(Module.setStatus.last.time=n,Module.setStatus.last.text=e,t?(e=t[1],progressElement.value=100*parseInt(t[2]),progressElement.max=100*parseInt(t[4]),progressElement.hidden=!1,spinnerElement.hidden=!1):(progressElement.value=null,progressElement.max=null,progressElement.hidden=!0,e||(spinnerElement.hidden=!0)),statusElement.innerHTML=e)}},print:webPrint,printErr:webPrint,noExitRuntime:null,preloadPlugins:null,STACK_SIZE:void 0,wasmMemory:void 0};function eventBuildOnChange(e){inputElement&&(e?inputElement.addEventListener("change",doBuild):inputElement.removeEventListener("change",doBuild))}function lccFormatFromSelection(e){switch(e){default:window.Error("Unexpected format selection");case"":return"asm";case"GNUASM":return"gnu-as-att";case"LLVM":return"llvm";case"LCCSSA":return"ssa_ir";case"LCCIR":return"ir";case"WAT":return"wat"}}async function doBuild(){outputElement.value="";var e=["foo.g","-o","-","--color","never"];shouldPrintAST&&e.push("--ast"),shouldPrintIR&&e.push("--ir"),shouldPrintMIR&&e.push("--mir"),shouldUseFormat&&(e.push("-f"),e.push(lccFormatFromSelection(shouldUseFormat))),shouldOptimise&&(e.push("-O"),e.push(shouldOptimise)),commandLineElement.innerHTML="lcc "+e.join(" "),(Module=await LCC(Module)).setStatus("Ready to run");var t=inputElement.value;console.log("updating foo.g to",t),Module.FS.writeFile("foo.g",t),console.log("foo.g updated to",t),Module.setStatus("Running lcc ",e),Module.callMain(e),Module.setStatus("Ran lcc ",e)}Module.setStatus("Ready"),window.onerror=()=>{Module.setStatus("Exception thrown, see JavaScript console"),spinnerElement.style.display="none",Module.setStatus=e=>{e&&console.error("[post-exception status] "+e)}},document.getElementById("build-on-change").addEventListener("change",(function(){eventBuildOnChange(this.checked)})),eventBuildOnChange(document.getElementById("build-on-change").checked),document.getElementById("print-ast").addEventListener("change",(function(){shouldPrintAST=this.checked,doBuild()})),shouldPrintAST=document.getElementById("print-ast").checked,document.getElementById("print-ir").addEventListener("change",(function(){shouldPrintIR=this.checked,doBuild()})),shouldPrintIR=document.getElementById("print-ir").checked,document.getElementById("print-mir").addEventListener("change",(function(){shouldPrintMIR=this.checked,doBuild()})),shouldPrintMIR=document.getElementById("print-mir").checked,document.getElementById("format").addEventListener("change",(function(e){shouldUseFormat=e.target.value,doBuild()})),document.getElementById("optimisation").addEventListener("change",(function(e){shouldOptimise=e.target.value,doBuild()})),document.getElementById("build").addEventListener("click",doBuild),doBuild()</script><script type=module>import initModule from"./lcc.js";initModule(Module)</script></body></html>